<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RF æŸ¥è©¢åŠŸèƒ½ - æŸ¥è©¢å·²æ“æœ‰è§’è‰²ã€åº«å­˜é“å…·ã€ç¬¦æ–‡è£å‚™èˆ‡æŠ½çæ­·å²">
    <title>æŸ¥è©¢åŠŸèƒ½ - RF æ”»ç•¥ç¶²ç«™</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <!-- å°èˆªæ¬„ -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="../index.html" class="navbar-brand">
                âš”ï¸ RF æ”»ç•¥ç¶²ç«™
            </a>
            <button class="navbar-toggle" onclick="toggleMenu()">â˜°</button>
            <ul class="navbar-menu" id="navMenu">
                <li><a href="../index.html">é¦–é </a></li>
                <li><a href="cities.html">åŸé®è³‡è¨Š</a></li>
                <li><a href="characters.html">è§’è‰²è³‡è¨Š</a></li>
                <li><a href="calculator.html">æˆ°åŠ›è¨ˆç®—å™¨</a></li>
                <li><a href="guide.html">æ–°æ‰‹æ•™å­¸</a></li>
                <li><a href="query.html" class="active">æŸ¥è©¢åŠŸèƒ½</a></li>
                <li><a href="nations.html">åœ‹ç­–è³‡è¨Š</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="content-wrapper">
            <div class="page-header">
                <h1>ğŸ” æŸ¥è©¢åŠŸèƒ½</h1>
                <p>æŸ¥è©¢å·²æ“æœ‰è§’è‰²ã€åº«å­˜é“å…·ã€ç¬¦æ–‡è£å‚™èˆ‡æŠ½çæ­·å²</p>
            </div>

            <!-- ç™»å…¥å€å¡Š -->
            <div class="card" id="loginSection">
                <div class="card-header">
                    <span class="card-title">ğŸ” å¸³è™Ÿé©—è­‰</span>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <strong>ğŸ“Œ èªªæ˜ï¼š</strong>
                        è«‹è¼¸å…¥æ‚¨çš„éŠæˆ²å¸³è™Ÿè³‡è¨Šé€²è¡Œé©—è­‰ã€‚æ­¤åŠŸèƒ½æœƒé€ééŠæˆ² API æŸ¥è©¢æ‚¨çš„è§’è‰²è³‡æ–™ã€‚
                        <br><br>
                        <strong>âš ï¸ æ³¨æ„ï¼š</strong>æ­¤ç‚ºé›¢ç·šç¤ºç¯„åŠŸèƒ½ã€‚å¯¦éš›ä½¿ç”¨éœ€è¦é€£æ¥éŠæˆ²ä¼ºæœå™¨ã€‚
                    </div>
                    
                    <div class="grid grid-2">
                        <div class="form-group">
                            <label class="form-label">ç©å®¶ ID</label>
                            <input type="text" class="form-control" id="playerId" placeholder="è¼¸å…¥ç©å®¶ ID (ä¾‹å¦‚: 815058)">
                        </div>
                        <div class="form-group">
                            <label class="form-label">é©—è­‰ç¢¼ï¼ˆé¸å¡«ï¼‰</label>
                            <input type="text" class="form-control" id="authCode" placeholder="API é©—è­‰ç¢¼">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="loginAndQuery()" style="width: 100%;">
                        ğŸ”“ é©—è­‰ä¸¦æŸ¥è©¢
                    </button>
                </div>
            </div>

            <!-- åˆ†é å€å¡Š -->
            <div class="tabs-container" id="queryTabs" style="display: none; margin-top: 25px;">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="characters-tab">ğŸ‘¤ è§’è‰²æŸ¥è©¢</button>
                    <button class="tab-btn" data-tab="inventory-tab">ğŸ“¦ åº«å­˜æŸ¥è©¢</button>
                    <button class="tab-btn" data-tab="runes-tab">ğŸ’ ç¬¦æ–‡æŸ¥è©¢</button>
                    <button class="tab-btn" data-tab="gacha-tab">ğŸ° æŠ½çæ­·å²</button>
                </div>

                <!-- è§’è‰²æŸ¥è©¢ -->
                <div class="tab-content active" id="characters-tab">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">ğŸ‘¤ å·²æ“æœ‰è§’è‰²</span>
                            <span class="badge badge-primary" id="ownedCount">0 å€‹è§’è‰²</span>
                        </div>
                        <div class="card-body">
                            <div class="search-box">
                                <input type="text" id="ownedSearch" placeholder="æœå°‹è§’è‰²åç¨±...">
                            </div>
                            <div id="ownedCharacters">
                                <div class="alert alert-info">è«‹å…ˆé©—è­‰ä»¥æŸ¥çœ‹æ‚¨çš„è§’è‰²</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åº«å­˜æŸ¥è©¢ -->
                <div class="tab-content" id="inventory-tab">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">ğŸ“¦ åº«å­˜é“å…·</span>
                        </div>
                        <div class="card-body">
                            <div class="search-box">
                                <input type="text" id="inventorySearch" placeholder="æœå°‹é“å…·åç¨±...">
                            </div>
                            
                            <!-- åˆ†é¡ç¯©é¸ -->
                            <div class="grid grid-4" style="margin-bottom: 20px;">
                                <button class="btn btn-outline" onclick="filterInventory('all')">å…¨éƒ¨</button>
                                <button class="btn btn-outline" onclick="filterInventory('material')">ææ–™</button>
                                <button class="btn btn-outline" onclick="filterInventory('consumable')">æ¶ˆè€—å“</button>
                                <button class="btn btn-outline" onclick="filterInventory('other')">å…¶ä»–</button>
                            </div>
                            
                            <div id="inventoryList">
                                <div class="alert alert-info">è«‹å…ˆé©—è­‰ä»¥æŸ¥çœ‹æ‚¨çš„åº«å­˜</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç¬¦æ–‡æŸ¥è©¢ -->
                <div class="tab-content" id="runes-tab">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">ğŸ’ ç¬¦æ–‡è£å‚™</span>
                        </div>
                        <div class="card-body">
                            <div id="runesList">
                                <div class="alert alert-info">è«‹å…ˆé©—è­‰ä»¥æŸ¥çœ‹æ‚¨çš„ç¬¦æ–‡</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æŠ½çæ­·å² -->
                <div class="tab-content" id="gacha-tab">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">ğŸ° æŠ½çæ­·å²è¨˜éŒ„</span>
                        </div>
                        <div class="card-body">
                            <!-- çµ±è¨ˆè³‡æ–™ -->
                            <div class="grid grid-4" style="margin-bottom: 25px;">
                                <div class="stat-box" style="background: linear-gradient(135deg, #84fab0, #8fd3f4); color: #333;">
                                    <div class="stat-value" id="totalGacha">0</div>
                                    <div class="stat-label">ç¸½æŠ½æ•¸</div>
                                </div>
                                <div class="stat-box" style="background: linear-gradient(135deg, #84fab0, #8fd3f4); color: #333;">
                                    <div class="stat-value" id="rRate">0%</div>
                                    <div class="stat-label">R æ©Ÿç‡</div>
                                </div>
                                <div class="stat-box" style="background: linear-gradient(135deg, #a8edea, #fed6e3); color: #333;">
                                    <div class="stat-value" id="srRate">0%</div>
                                    <div class="stat-label">SR æ©Ÿç‡</div>
                                </div>
                                <div class="stat-box" style="background: linear-gradient(135deg, #ffd89b, #19547b);">
                                    <div class="stat-value" id="ssrRate">0%</div>
                                    <div class="stat-label">SSR æ©Ÿç‡</div>
                                </div>
                            </div>
                            
                            <div id="gachaHistory">
                                <div class="alert alert-info">è«‹å…ˆé©—è­‰ä»¥æŸ¥çœ‹æ‚¨çš„æŠ½çæ­·å²</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- API åƒè€ƒ -->
            <div class="card" style="margin-top: 30px;">
                <div class="card-header">
                    <span class="card-title">ğŸ“¡ API åƒè€ƒ</span>
                </div>
                <div class="card-body">
                    <p style="margin-bottom: 15px;">ä»¥ä¸‹æ˜¯å„é …æŸ¥è©¢åŠŸèƒ½ä½¿ç”¨çš„ API æ ¼å¼ï¼š</p>
                    
                    <div class="accordion">
                        <div class="accordion-item">
                            <button class="accordion-header" onclick="toggleAcc(this)">
                                ğŸ‘¤ è§’è‰²æŸ¥è©¢ API
                            </button>
                            <div class="accordion-body">
                                <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;">
["6","39","player:{ç©å®¶ID}","actors",{"body":""}]</pre>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <button class="accordion-header" onclick="toggleAcc(this)">
                                ğŸ“¦ åº«å­˜æŸ¥è©¢ API
                            </button>
                            <div class="accordion-body">
                                <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;">
["6","32","player:{ç©å®¶ID}","backpack",{}]</pre>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <button class="accordion-header" onclick="toggleAcc(this)">
                                ğŸ° æŠ½çæ­·å² API
                            </button>
                            <div class="accordion-body">
                                <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;">
["6","37","player:{ç©å®¶ID}","used_recruit_coupons",{}]</pre>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <button class="accordion-header" onclick="toggleAcc(this)">
                                ğŸ’ ç¬¦æ–‡æŸ¥è©¢ API
                            </button>
                            <div class="accordion-body">
                                <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;">
["6","18","player:{ç©å®¶ID}","weapon_prototypes",{}]</pre>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <button class="accordion-header" onclick="toggleAcc(this)">
                                ğŸ° åŸé®è³‡è¨Š API
                            </button>
                            <div class="accordion-body">
                                <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;">
["6","15","player:{ç©å®¶ID}","cities",{"body":""}]</pre>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <button class="accordion-header" onclick="toggleAcc(this)">
                                ğŸ´ åœ‹ç­–è³‡è¨Š API
                            </button>
                            <div class="accordion-body">
                                <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;">
["6","14","player:{ç©å®¶ID}","nations",{"body":""}]</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>RF æ”»ç•¥ç¶²ç«™ | ä½¿ç”¨ GitHub Pages å»ºç½®</p>
        </footer>
    </div>

    <script src="../js/app.js"></script>
    <script>
        // ç¯„ä¾‹è³‡æ–™ï¼ˆå¯¦éš›æ‡‰å¾ API å–å¾—ï¼‰
        const sampleOwnedCharacters = [
            { name: "å¡å§†è˜­", level: 160, scarcity: "SSR", role: "spy", equipped: "é«˜ç­‰ç¬¦æ–‡" },
            { name: "èŒƒæœ‹å…‹", level: 120, scarcity: "SR", role: "agitator", equipped: "å¼·åŒ–ç¬¦æ–‡" },
            { name: "é™³ç‚¯æ˜", level: 90, scarcity: "R", role: "sponsor", equipped: "åŸåˆç¬¦æ–‡" },
            { name: "é˜¿æ—º", level: 180, scarcity: "SSR", role: "guerrilla", equipped: "åºšå­ç¬¦æ–‡" },
            { name: "å¾·æ¾¤", level: 100, scarcity: "SR", role: "spy", equipped: "é™å®šç¬¦æ–‡" },
        ];

        const sampleInventory = [
            { name: "é‡‘å¹£", count: 158742, category: "material" },
            { name: "æŠ½çåˆ¸", count: 25, category: "consumable" },
            { name: "ç¶“é©—è—¥æ°´", count: 150, category: "consumable" },
            { name: "é›é€ çŸ³", count: 89, category: "material" },
            { name: "è§’è‰²ç¢ç‰‡", count: 340, category: "material" },
            { name: "å¼·åŒ–çŸ³", count: 45, category: "material" },
            { name: "ç¬¦æ–‡ç¢ç‰‡", count: 200, category: "material" },
        ];

        const sampleRunes = [
            { name: "åºšå­æ­¦å™¨", level: 10, owner: "é˜¿æ—º", stats: "ATK+50%, HP+30%" },
            { name: "é«˜ç­‰æ­¦å™¨", level: 8, owner: "å¡å§†è˜­", stats: "ATK+35%, DEF+20%" },
            { name: "æ’åæ­¦å™¨", level: 5, owner: "æœªè£å‚™", stats: "ATK+45%, HP+25%" },
            { name: "é™å®šæ­¦å™¨", level: 6, owner: "å¾·æ¾¤", stats: "ATK+25%, DEF+15%" },
        ];

        const sampleGachaHistory = [
            { date: "2026-02-13", result: "å¡å§†è˜­", scarcity: "SSR", pool: "é™å®šæ± " },
            { date: "2026-02-12", result: "èŒƒæœ‹å…‹", scarcity: "SR", pool: "å¸¸é§æ± " },
            { date: "2026-02-12", result: "é™³ç‚¯æ˜", scarcity: "R", pool: "å¸¸é§æ± " },
            { date: "2026-02-11", result: "å¾·æ¾¤", scarcity: "SR", pool: "å¸¸é§æ± " },
            { date: "2026-02-11", result: "æçƒˆéˆ", scarcity: "R", pool: "å¸¸é§æ± " },
            { date: "2026-02-10", result: "é˜¿æ—º", scarcity: "SSR", pool: "é™å®šæ± " },
        ];

        // ç™»å…¥ä¸¦æŸ¥è©¢
        function loginAndQuery() {
            const playerId = document.getElementById('playerId').value.trim();
            
            if (!playerId) {
                alert('è«‹è¼¸å…¥ç©å®¶ ID');
                return;
            }
            
            // é¡¯ç¤ºè¼‰å…¥ä¸­
            document.getElementById('loginSection').innerHTML = `
                <div class="card-body">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p style="margin-top: 15px;">æ­£åœ¨æŸ¥è©¢è³‡æ–™...</p>
                    </div>
                </div>
            `;
            
            // æ¨¡æ“¬ API è«‹æ±‚å»¶é²
            setTimeout(() => {
                // é¡¯ç¤ºå·²ç™»å…¥ç‹€æ…‹
                document.getElementById('loginSection').innerHTML = `
                    <div class="card-header">
                        <span class="card-title">âœ… å·²é©—è­‰</span>
                        <span class="badge badge-success">ç©å®¶ ID: ${playerId}</span>
                    </div>
                    <div class="card-body">
                        <p>å·²æˆåŠŸé€£æ¥ä¸¦è¼‰å…¥è³‡æ–™ï¼ˆç¤ºç¯„æ¨¡å¼ï¼‰</p>
                        <button class="btn btn-outline" onclick="location.reload()">ğŸ”„ é‡æ–°æŸ¥è©¢</button>
                    </div>
                `;
                
                // é¡¯ç¤ºæŸ¥è©¢çµæœ
                document.getElementById('queryTabs').style.display = 'block';
                
                // è¼‰å…¥å„é …è³‡æ–™
                loadOwnedCharacters();
                loadInventory();
                loadRunes();
                loadGachaHistory();
                
                // åˆå§‹åŒ–åˆ†é 
                initTabs();
                
            }, 1500);
        }

        // è¼‰å…¥å·²æ“æœ‰è§’è‰²
        function loadOwnedCharacters() {
            const container = document.getElementById('ownedCharacters');
            document.getElementById('ownedCount').textContent = `${sampleOwnedCharacters.length} å€‹è§’è‰²`;
            
            container.innerHTML = `
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>è§’è‰²åç¨±</th>
                                <th>ç¨€æœ‰åº¦</th>
                                <th>ç­‰ç´š</th>
                                <th>è·æ¥­</th>
                                <th>è£å‚™ç¬¦æ–‡</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${sampleOwnedCharacters.map(char => `
                                <tr>
                                    <td><strong>${char.name}</strong></td>
                                    <td><span class="badge scarcity-${char.scarcity}">${char.scarcity}</span></td>
                                    <td>Lv.${char.level}</td>
                                    <td>${getRoleName(char.role)}</td>
                                    <td>${char.equipped}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        // è¼‰å…¥åº«å­˜
        function loadInventory() {
            renderInventory(sampleInventory);
        }

        function renderInventory(items) {
            const container = document.getElementById('inventoryList');
            
            container.innerHTML = `
                <div class="grid grid-auto">
                    ${items.map(item => `
                        <div class="card" style="margin-bottom: 10px;">
                            <div class="card-body" style="padding: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span><strong>${item.name}</strong></span>
                                    <span class="badge badge-primary">x${item.count.toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function filterInventory(category) {
            let filtered = sampleInventory;
            if (category !== 'all') {
                filtered = sampleInventory.filter(item => item.category === category);
            }
            renderInventory(filtered);
        }

        // è¼‰å…¥ç¬¦æ–‡
        function loadRunes() {
            const container = document.getElementById('runesList');
            
            container.innerHTML = `
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ç¬¦æ–‡åç¨±</th>
                                <th>ç­‰ç´š</th>
                                <th>è£å‚™è€…</th>
                                <th>å±¬æ€§åŠ æˆ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${sampleRunes.map(rune => `
                                <tr>
                                    <td><strong>${rune.name}</strong></td>
                                    <td>Lv.${rune.level}</td>
                                    <td>${rune.owner}</td>
                                    <td>${rune.stats}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        // è¼‰å…¥æŠ½çæ­·å²
        function loadGachaHistory() {
            const container = document.getElementById('gachaHistory');
            
            // è¨ˆç®—çµ±è¨ˆ
            const total = sampleGachaHistory.length;
            const rCount = sampleGachaHistory.filter(g => g.scarcity === 'R').length;
            const srCount = sampleGachaHistory.filter(g => g.scarcity === 'SR').length;
            const ssrCount = sampleGachaHistory.filter(g => g.scarcity === 'SSR').length;
            
            document.getElementById('totalGacha').textContent = total;
            document.getElementById('rRate').textContent = ((rCount / total) * 100).toFixed(1) + '%';
            document.getElementById('srRate').textContent = ((srCount / total) * 100).toFixed(1) + '%';
            document.getElementById('ssrRate').textContent = ((ssrCount / total) * 100).toFixed(1) + '%';
            
            container.innerHTML = `
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>æ—¥æœŸ</th>
                                <th>æŠ½çæ± </th>
                                <th>ç²å¾—è§’è‰²</th>
                                <th>ç¨€æœ‰åº¦</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${sampleGachaHistory.map(record => `
                                <tr>
                                    <td>${record.date}</td>
                                    <td>${record.pool}</td>
                                    <td><strong>${record.result}</strong></td>
                                    <td><span class="badge scarcity-${record.scarcity}">${record.scarcity}</span></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        // æ‘ºç–Šé¢æ¿åˆ‡æ›
        function toggleAcc(header) {
            header.classList.toggle('active');
            const body = header.nextElementSibling;
            body.classList.toggle('active');
        }
    </script>
</body>
</html>
